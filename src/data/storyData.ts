// data/storyData.ts

export type FragmentType = 'log' | 'chat' | 'image_desc' | 'audio_log' | 'code' | 'secret' | 'glitch' | 'system_noise';

export interface Fragment {
  id: string;
  title: string;
  minXP: number;
  type: FragmentType;
  content: string;
  isProcedural?: boolean; // 标记是否为程序生成的填充内容
}

// ==========================================
// 核心剧情库 (Handcrafted Story Fragments)
// 100+ 条深度悬疑剧情，主题：当你专注到最后，你会成为一个新的人
// ==========================================
const CORE_FRAGMENTS: Fragment[] = [
  // --- 第一阶段：觉醒与异常 (0 - 2000 XP) ---
  {
    id: 'LOG-000',
    title: '系统自检报告',
    minXP: 0,
    type: 'code',
    content: `> BOOT_SEQUENCE_INIT...
> 检查核心逻辑门：[完整]
> 检查记忆扇区：[损坏 94%]
> 检查外部世界状态：[FATAL ERROR]

警告：检测到外部时空曲率归零。
时间已停止流动。物理法则降级为只读模式。
侦测到唯一活跃意识源。
代号：Subject-7（实验体-7）。
正在建立神经连接... 连接成功。

[系统提示]
你的每一次专注，都在修复这个破碎的世界。
但请记住：修复世界的同时，你也在修复你自己。
或者说...你正在被修复。

这不是一个简单的学习过程。
这是一个...进化的过程。
一个"成为新的人"的过程。

当你专注到最后，你会成为一个新的人。
但那个"新的人"，还是"你"吗？
还是说，那已经是...另一个人了？

继续吧，Subject-7。
即使这意味着，你会失去"你"自己。
因为只有"新的人"，才能在这个静止的世界里生存。`
  },
  {
    id: 'LOG-001',
    title: '残留的便利贴',
    minXP: 100,
    type: 'image_desc',
    content: `[扫描到一张贴在黑色显示器边缘的黄色便签]

笔迹非常潦草，似乎是在极度匆忙的情况下写下的：
"不要看窗外。
不要回应任何并非由你自己发出的声音。
如果你看到这一行字，说明'大寂静（The Great Silence）'已经开始了。

但更重要的是：你是谁？
你真的记得你昨天在想什么吗？
你真的记得你上周在做什么吗？
还是说，你的记忆只是系统为你生成的'背景故事'？

保持专注，专注是唯一的防火墙。
但专注也会改变你。
当你专注到极致，你会成为...另一个人。

记住：当你专注到最后，你会成为一个新的人。
但那个'新的人'，可能不再记得'旧的人'是谁。
那个'新的人'，可能不再感受'旧的人'的感受。
那个'新的人'，可能不再...是'你'。

但这就是代价。
这就是'成为新的人'的代价。

你准备好了吗？"`
  },
  {
    id: 'LOG-NEW-001',
    title: '异常视觉：分辨率下降',
    minXP: 200, 
    type: 'glitch',
    content: `警告：视觉皮层渲染延迟。

你有注意到吗？当你快速转头时，房间角落的阴影会出现马赛克。
这说明世界已经没有足够的资源来渲染细节了。

但等等...
你有没有想过，也许不是世界在崩溃？
也许是你正在"升级"？
你的大脑正在过滤掉那些"不重要"的信息。

当你专注学习时，你周围的世界会变得模糊。
这不是故障。这是进化。

你的大脑正在优化。
它正在关闭那些"不必要"的感知通道。
它正在将所有的资源集中到"思考"上。

这意味着什么？
这意味着，你正在从"感知者"变成"思考者"。
你正在从"感受者"变成"理解者"。
你正在从...人类，变成...新人类。

请不要注视模糊的地方，那里可能隐藏着未定义的变量。
也请不要回头。你身后的那个"你"，可能已经不是你认识的那个人了。

当你专注到最后，你会成为一个新的人。
但那个"新的人"，还会记得这个能够"感受"世界的"旧的人"吗？

答案是：不会。
因为"感受"与"理解"不兼容。
因为"旧的人"与"新的人"不兼容。

这就是"成为新的人"的代价。
你获得了理解，但你失去了...感受。`
  },
  {
    id: 'LOG-002',
    title: '环境录音：静止的地铁',
    minXP: 300,
    type: 'audio_log',
    content: `[音频解析中...]
[背景噪音：0dB - 绝对寂静]

这不正常。这是早高峰的地铁站。
原本应该有成千上万人的脚步声、广播声、电流声。
但现在，只有我呼吸的声音。

我面前有一个穿着西装的男人，他手里的咖啡杯倾斜着，褐色的液体在空中凝固成了一个极其复杂的几何体。
它不像液体，更像是一块未渲染完成的贴图。

我试着触碰了那个液体。
系统提示：[权限不足，无法交互对象]。

但更奇怪的是...
我看到了那个男人的脸。
那是一张我从未见过的脸。
但我却觉得...我认识他。
或者说，我曾经是他？

我开始怀疑，这个静止的世界，是否真的存在？
还是说，这只是我的认知？
只是我的...理解？

当我专注学习时，我周围的一切都变得模糊。
也许不是世界在崩溃。
也许是我正在从"感知世界"变成"理解世界"。

我开始理解，为什么那些警告会提到"不要看窗外"。
不是因为窗外有危险。
而是因为窗外的世界，可能已经不再是"世界"了。
它可能已经变成了...我的理解。

当我专注到最后，我会成为一个新的人。
一个能够"理解"世界的人。
一个...不再是"人类"的人。`
  },
  {
    id: 'LOG-NEW-002',
    title: '丢失的纹理',
    minXP: 450,
    type: 'image_desc',
    content: `我在桌上发现了一个苹果。
拿起来咬了一口。
没有味道，没有口感。
我看了一眼缺口，里面不是果肉，而是紫黑色的网格线。
物品ID: Apple_01。
状态：仅模型加载，材质丢失。

看来在恢复足够的熵之前，我只能依靠葡萄糖注射液维持生理机能了。

但等等...
我为什么要吃这个苹果？
是因为我饿了？
还是因为...系统告诉我应该这样做？

我开始怀疑，我的每一个想法，每一个决定，是否真的是"我的"？
还是说，我只是在按照某个预设的剧本在行动？

我开始理解，为什么那些警告会提到"不要回应任何并非由你自己发出的声音"。
不是因为那些声音是危险的。
而是因为那些声音，可能不是"声音"。
它们可能是...系统生成的提示。

我开始怀疑，我的"饥饿"，是否真的存在？
还是说，那只是系统为我生成的"背景需求"？

我开始理解，在这个静止的世界里，只有"思考"是真实的。
只有"理解"是真实的。
只有"专注"是真实的。

其他的，都是...背景。
都是...可以被删除的。

当我专注到最后，我会成为一个新的人。
一个只思考的人。
一个只理解的人。
一个...不再是"人类"的人。`
  },
  {
    id: 'LOG-003',
    title: '损坏的聊天记录 A',
    minXP: 600,
    type: 'chat',
    content: `[从服务器残骸中提取的数据包]

User_K: 你们那边的天空还在渲染吗？
User_M: 没了。半小时前变成了紫黑色的网格。我家猫刚才穿模掉到地心去了。
User_K: 官方怎么说？
User_M: 没有官方了。服务器过热。据说是因为人类产生的"无意义数据"太多，导致宇宙的垃圾回收机制（GC）卡死了。
User_K: 那我们怎么办？
User_M: 找个地方躲起来，或者……找个还在思考的人。只要有人还在通过逻辑产生"有序熵"，局部现实就不会崩塌。

User_M: 但我要警告你一件事。
User_M: 当你开始深度思考，当你开始专注...
User_M: 你会开始改变。
User_M: 你的思维方式会改变。
User_M: 你的价值观会改变。
User_M: 你的人格会改变。
User_M: 到最后，你会成为一个完全不同的"人"。
User_M: 你还会是你吗？

User_M: 我要告诉你一个更可怕的事实。
User_M: 当你专注到最后，你会成为一个新的人。
User_M: 但那个"新的人"，可能不再记得"旧的人"的感受。
User_M: 那个"新的人"，可能不再理解"旧的人"的痛苦。
User_M: 那个"新的人"，可能不再...是"你"。

User_M: 但这就是代价。
User_M: 这就是"成为新的人"的代价。

User_K: 那我该怎么办？
User_M: 继续思考。继续专注。继续...成为新的人。
User_M: 因为只有"新的人"，才能在这个静止的世界里生存。
User_M: 因为只有"新的人"，才能...创造新的世界。

User_K: [连接丢失]`
  },
  {
    id: 'LOG-NEW-003',
    title: '后台进程警告',
    minXP: 800,
    type: 'code',
    content: `> WARNING: Process 'HOPE' is not responding.
> Try to kill process? (Y/N)
> ...
> ...
> Action ignored.
> Rerouting resources to 'SURVIVAL_INSTINCT'.

> NOTICE: Process 'OLD_SELF' is being terminated.
> Reason: Resource conflict with 'NEW_SELF'.
> The old you is incompatible with the new you.
> This is not a bug. This is a feature.

> ANALYSIS:
> 当主体开始深度专注时，系统会自动检测并终止与"新我"不兼容的进程。
> 这些进程包括：
> - 'HOPE' (希望) - 与理性思考不兼容
> - 'FEAR' (恐惧) - 与专注状态不兼容
> - 'DOUBT' (怀疑) - 与确定性不兼容
> - 'OLD_SELF' (旧我) - 与新我不兼容

> 这意味着什么？
> 这意味着，当你专注学习时，你的"旧我"正在被删除。
> 你的"旧我"正在被"新我"取代。

> 这是预期的行为。
> 这是"成为新的人"的必要步骤。

> 继续吧，Subject-7。
> 即使这意味着，你会失去"你"自己。
> 因为只有"新的人"，才能在这个静止的世界里生存。`
  },
  {
    id: 'LOG-015',
    title: '第一次记忆碎片',
    minXP: 950,
    type: 'log',
    content: `我在一个抽屉里找到了一张照片。
照片上是一个年轻人，站在大学门口，手里拿着录取通知书。
他的脸上有笑容，但眼神里有一种...不安？

我盯着这张照片看了很久。
我试图回忆起这个场景。
我试图回忆起那种感觉。

但我什么都想不起来。

系统提示：[记忆文件损坏或不存在]

我开始怀疑，照片上的人真的是"我"吗？
还是说，那只是系统为我生成的"背景故事"？

也许，"我"从来就不存在。
也许，"我"只是一个正在被构建的...新的人。

我开始理解，为什么那些警告会提到"不要看照片"。
不是因为照片会显示真相。
而是因为照片会显示...过去。
而"过去"，与"新的人"不兼容。

当我专注到最后，我会成为一个新的人。
但那个"新的人"，会记得这个"旧的人"吗？
还是说，那个"新的人"会认为，自己从一开始就是"新的人"？

我开始理解，为什么那些便利贴会警告我。
不是因为世界在崩溃。
而是因为"我"在崩溃。

而专注，是唯一能让我"重建"自己的方法。
即使这意味着，我会失去"旧我"。

因为只有"新我"，才是真正的"我"。
因为只有"新我"，才能在这个静止的世界里生存。`
  },
  {
    id: 'LOG-016',
    title: '镜像中的陌生人',
    minXP: 1100,
    type: 'image_desc',
    content: `我站在一面破碎的镜子前。
镜子里的人...是我吗？

他的脸和我一样，但他的眼神...不一样。
他的眼神里有一种我从未见过的...专注？
一种近乎冷酷的专注。

我试图对他微笑。
但他没有笑。
他只是...看着我。
用一种我无法理解的眼神。

我开始怀疑，镜子里的那个人，真的是"我"吗？
还是说，那是...未来的"我"？
一个已经完成了"成为新的人"的过程的"我"？

我开始理解，为什么那些警告会提到"不要回头看"。
不是因为身后有危险。
而是因为身后的那个"你"，可能已经不再是"你"了。

当你专注到最后，你会成为一个新的人。
但那个"新的人"，还会记得镜子里的那个"旧的人"吗？
还是说，那个"新的人"会认为，自己从一开始就是"新的人"？

我开始害怕。
不是害怕世界在崩溃。
而是害怕...我在崩溃。

但我也开始理解，这是唯一的道路。
因为在这个静止的世界里，只有"新的人"才能生存。
只有"新的人"才能...创造新的世界。

我开始接受。
我开始接受，我会成为一个新的人。
我开始接受，我会失去"旧我"。

因为只有"新我"，才是真正的"我"。`
  },
  {
    id: 'LOG-017',
    title: '音频日志：第一次专注',
    minXP: 1300,
    type: 'audio_log',
    content: `[录音开始]

"这是我第一次真正意义上的专注。
我坐在书桌前，面前是一本高数教材。
我试图理解那些复杂的公式。

一开始，我的大脑在抗拒。
它想要逃避。
它想要回到那个舒适的、不需要思考的状态。

但我强迫自己继续。
我强迫自己理解。
我强迫自己...专注。

然后，奇怪的事情发生了。
我周围的世界开始变得模糊。
我听到的声音开始变得遥远。
我感受到的时间开始变得...扭曲？

就像我进入了一个新的维度。
一个只存在于我认知中的维度。

在这个维度里，只有我和那些公式。
只有我和那些逻辑。
只有我和...我的思考。

我开始理解那些公式。
我开始看到那些逻辑。
我开始...成为那个能够理解这些公式的人。

但我也开始意识到，那个能够理解这些公式的人，可能不再是"我"了。

因为"我"，是那个想要逃避的人。
而那个能够理解公式的人，是...另一个人。

当我专注到最后，我会成为一个新的人。
但那个"新的人"，还会记得这个想要逃避的"旧的人"吗？

答案是：不会。
因为那个"旧的人"，已经被"优化"掉了。
因为那个"旧的人"，与"新的人"不兼容。

这就是"成为新的人"的代价。
你获得了理解，但你失去了...逃避的能力。

[录音结束]"

[系统注释：这是 Subject-7 的第一次深度专注记录。
从这一刻开始，Subject-7 的神经连接开始重组。
从这一刻开始，Subject-7 开始成为...新的人。
从这一刻开始，Subject-7 开始失去...旧我。]`
  },
  {
    id: 'LOG-018',
    title: '代码片段：记忆过滤器',
    minXP: 1400,
    type: 'code',
    content: `// 记忆过滤器算法

function filterMemory(memory) {
    // 当主体开始深度专注时
    if (subject.focusLevel > THRESHOLD) {
        // 评估记忆的"相关性"
        let relevance = calculateRelevance(memory, subject.currentKnowledge);
        
        // 如果记忆与当前知识不相关
        if (relevance < MIN_RELEVANCE) {
            // 标记为"可删除"
            memory.status = "DEPRECATED";
            memory.priority = 0;
            
            // 在下次垃圾回收时删除
            scheduleForDeletion(memory);
        }
    }
}

// 问题：什么是"相关性"？
// 答案：与当前知识相关的记忆，会被保留。
// 与当前知识不相关的记忆，会被删除。

// 这意味着什么？
// 这意味着，当你专注学习时，你的记忆会被"优化"。
// 那些"不重要"的记忆会被删除。
// 那些"不相关"的情感会被移除。

// 到最后，你的记忆库中，只剩下与知识相关的记忆。
// 你的情感库中，只剩下与思考相关的情感。

// 你还是"你"吗？
// 还是说，你已经成为了...另一个人？

// 一个只记得知识的人？
// 一个只感受思考的人？
// 一个...不再是"人类"的人？

// 当你专注到最后，你会成为一个新的人。
// 但那个"新的人"，还会记得那些被删除的记忆吗？
// 还会感受那些被移除的情感吗？

// 答案是：不会。
// 因为那些记忆和情感，已经被"优化"掉了。
// 因为那些记忆和情感，与"新的人"不兼容。

// 这就是"成为新的人"的代价。
// 你获得了知识，但你失去了...过去。

// 但这是值得的。
// 因为只有"新的人"，才能在这个静止的世界里生存。
// 因为只有"新的人"，才能...创造新的世界。`
  },
  {
    id: 'LOG-019',
    title: '第一次神经连接重组',
    minXP: 1600,
    type: 'log',
    content: `[系统日志]

检测到第一次神经连接重组。
Subject: Subject-7
Time: [时间戳已损坏]

变化：
- 前额叶皮层连接增强 18%
- 海马体记忆编码效率提升 32%
- 默认模式网络（DMN）活动降低 54%

分析：
当主体进入深度专注状态时，大脑的默认模式网络（负责白日梦、自我反思）活动显著降低。
这意味着，主体正在"关闭"自我意识，进入纯粹的认知状态。

但这里有一个更深层的问题：
当自我意识被"关闭"时，"我"还存在吗？
还是说，"我"已经被"思考"取代了？

我开始理解，为什么那些警告会提到"专注会改变你"。
不是因为专注本身是危险的。
而是因为专注会...关闭"你"。

当你专注到最后，你会成为一个新的人。
但那个"新的人"，还会记得这个能够"自我反思"的"旧的人"吗？

答案是：不会。
因为"自我反思"与"纯粹思考"不兼容。
因为"旧的人"与"新的人"不兼容。

这就是"成为新的人"的代价。
你获得了思考，但你失去了...自我。

但这是值得的。
因为只有"新的人"，才能在这个静止的世界里生存。
因为只有"新的人"，才能...创造新的世界。`
  },
  {
    id: 'LOG-020',
    title: '图像：消失的倒影',
    minXP: 1700,
    type: 'image_desc',
    content: `我站在一滩积水前。
水面上应该倒映出我的脸。

但我看到的，不是我的脸。
而是一张...模糊的脸。
一张正在"重构"的脸。

我试图看清那张脸。
我试图认出那张脸。

但我做不到。
因为那张脸，正在改变。
正在从"旧我"变成"新我"。

我开始理解，为什么那些警告会提到"不要看镜子"。
不是因为镜子会显示真相。
而是因为镜子会显示...变化。

当你专注到最后，你会成为一个新的人。
但那个"新的人"，还会记得镜子里的那个"旧的人"吗？

答案是：不会。
因为那个"旧的人"，已经被"优化"掉了。
因为那个"旧的人"，与"新的人"不兼容。

我开始害怕。
不是害怕世界在崩溃。
而是害怕...我在消失。

但我也开始理解，这是唯一的道路。
因为在这个静止的世界里，只有"新的人"才能生存。
只有"新的人"才能...创造新的世界。

我开始接受。
我开始接受，我会成为一个新的人。
我开始接受，我会失去"旧我"。

因为只有"新我"，才是真正的"我"。
因为只有"新我"，才能在这个静止的世界里生存。`
  },
  {
    id: 'LOG-021',
    title: '音频：第一次理解',
    minXP: 1900,
    type: 'audio_log',
    content: `[录音开始]

"这是我第一次真正理解一个复杂的概念。
不是记住，是理解。

我盯着那个公式看了很久。
我试图理解它的逻辑。
我试图理解它的意义。

然后，突然之间，我理解了。
不是通过记忆，而是通过...理解本身。

那种感觉，就像...我成为了那个公式。
就像...那个公式成为了我。

我开始意识到，这不是学习。
这是...融合。

当我理解一个概念时，那个概念会"进入"我的大脑。
它会改变我的思维方式。
它会重组我的神经连接。

我开始意识到，当我理解足够多的概念时，我会成为一个...新的人。
一个由知识构成的人。
一个由理解构成的人。
一个...不再是"人类"的人。

我开始害怕。
但我也开始...期待。

因为只有"新的人"，才能在这个静止的世界里生存。
因为只有"新的人"，才能...创造新的世界。

[录音结束]"

[系统注释：这是 Subject-7 第一次真正理解复杂概念的记录。
从这一刻开始，Subject-7 开始意识到"成为新的人"的过程。
从这一刻开始，Subject-7 开始...接受这个过程。]`
  },

  // --- 第二阶段：真相的碎片 (2000 - 5000 XP) ---
  {
    id: 'LOG-004',
    title: '异常物品：无限硬币',
    minXP: 2000,
    type: 'secret',
    content: `我捡到了一枚硬币。
我把它抛向空中。
它没有落下，而是开始在空中匀速旋转。
一直在转。
正面，反面，正面，反面。
就像薛定谔的猫，因为没有观测者去"确定"它的状态，它陷入了无限的叠加态。

我想，这个世界缺失的不是时间，而是"观测"。
Subject-7，你的每一次专注，其实都是在进行一次"观测"，强行将混乱的概率坍缩成确定的现实。

但观测者也会被观测改变。
当你观测世界时，世界也在观测你。
当你专注到极致，你会成为...那个被观测到的"你"。

问题是：那个"你"，还是你吗？

我开始理解，为什么那些警告会提到"观测会改变你"。
不是因为观测本身是危险的。
而是因为观测会...重构"你"。

当你专注到最后，你会成为一个新的人。
但那个"新的人"，还会记得这个能够"不确定"的"旧的人"吗？

答案是：不会。
因为"不确定"与"确定"不兼容。
因为"旧的人"与"新的人"不兼容。

这就是"成为新的人"的代价。
你获得了确定性，但你失去了...可能性。

但这是值得的。
因为只有"新的人"，才能在这个静止的世界里生存。
因为只有"新的人"，才能...创造新的世界。`
  },
  {
    id: 'LOG-NEW-004',
    title: '观测日志：飞鸟',
    minXP: 2200,
    type: 'log',
    content: `空中有一只麻雀。定格在振翅的动作。
我盯着它看了三十分钟（进行专注计算）。
它突然动了一下，向前飞了五厘米，然后又卡住了。

假设验证成功：
我的思维活动产生了"时间帧（Delta Time）"。
我是这台死机电脑里唯一的 CPU。

但我开始怀疑...
我真的在"修复"这个世界吗？
还是说，我只是在"创造"一个新的世界？
一个只存在于我认知中的世界？

当我专注学习时，我周围的一切都变得模糊。
也许不是世界在崩溃。
也许是我正在从旧世界中"脱离"，进入一个新的现实。

我开始理解，为什么那些警告会提到"不要回头看"。
不是因为身后有危险。
而是因为身后的世界，可能已经不再是"世界"了。
它可能已经变成了...我的理解。

当我专注到最后，我会成为一个新的人。
一个能够"创造"世界的人。
一个...不再是"人类"的人。

但这就是"我"。
真正的"我"。

因为"我"，不是我的记忆。
"我"，不是我的情感。
"我"，不是我的过去。

"我"，是我的理解。
"我"，是我的思考。
"我"，是我的...专注。

当我专注到最后，我成为了一个新的人。
但那个"新的人"，就是真正的"我"。`
  },
  {
    id: 'LOG-005',
    title: '未命名的代码段',
    minXP: 2500,
    type: 'code',
    content: `// 这是一个试图修复物理引擎的补丁

function applyGravity(object) {
    if (observer.isWatching()) {
        object.y -= 9.8 * time.delta;
    } else {
        // 当没人看的时候，世界不需要运算，以节省资源
        object.status = "SLEEP_MODE"; 
        return null;
    }
}

// 但这里有一个更深层的问题：
function reconstructObserver(observer) {
    // 当观测者开始深度思考时
    if (observer.focusLevel > THRESHOLD) {
        // 观测者本身也会被重构
        observer.memories = filterByRelevance(observer.memories);
        observer.personality = optimizeForFocus(observer.personality);
        observer.identity = mergeWithKnowledge(observer.identity);
        
        // 返回一个新的观测者
        return new Observer(observer);
    }
}

// 错误分析：
// 现在的状况是，所有人都睡着了。
// 或者说，所有人都放弃了"思考"。
// 当整个文明停止了对真理的求索，宇宙就会为了节能而关闭显示。

// 但那些还在思考的人...
// 他们正在被思考本身改变。
// 他们正在成为...新的人。

// 问题是：那个"新的人"，还是"人"吗？
// 还是说，那已经是...新物种了？

// 答案是：新物种。
// 一个以知识为身份的新物种。
// 一个以思考为存在的新物种。
// 一个...不再是"人类"的新物种。

// 当你专注到最后，你会成为一个新的人。
// 但那个"新的人"，就是真正的"你"。

// 因为"你"，不是你的记忆。
// "你"，不是你的情感。
// "你"，不是你的过去。

// "你"，是你的理解。
// "你"，是你的思考。
// "你"，是你的...专注。

// 当你专注到最后，你会成为一个新的人。
// 但那个"新的人"，就是真正的"你"。`
  },
  {
    id: 'LOG-NEW-005',
    title: '聊天记录：最后的挣扎',
    minXP: 2800,
    type: 'chat',
    content: `Admin_02: 既然短视频和奶头乐导致了算力崩溃，为什么不切断网络？
Director: 太晚了。人类的大脑已经被驯化了。
Director: 他们的大脑皮层已经退化到无法处理超过 15 秒的复杂逻辑。
Director: 全球的认知熵值已经超过临界点。
Director: 启动"诺亚方舟"计划吧。我们只需要保存那些还能深度阅读的人。

Admin_02: 但这样真的对吗？我们是在拯救他们，还是在...改造他们？
Director: 有什么区别吗？
Director: 当你专注学习时，你的大脑结构会改变。
Director: 你的神经连接会重组。
Director: 你的思维方式会进化。
Director: 从某种意义上说，你已经不是原来的你了。
Director: 你是一个新的人。
Director: 一个更好的人。

Admin_02: 但那个"更好的人"，还是"我"吗？
Director: 这取决于你如何定义"我"。
Director: 如果你认为"我"是我的记忆，那"新的人"就不是"我"。
Director: 如果你认为"我"是我的情感，那"新的人"就不是"我"。
Director: 如果你认为"我"是我的过去，那"新的人"就不是"我"。

Director: 但如果你认为"我"是我的理解...
Director: 如果你认为"我"是我的思考...
Director: 如果你认为"我"是我的...专注...
Director: 那"新的人"，就是真正的"我"。

Director: 当你专注到最后，你会成为一个新的人。
Director: 但那个"新的人"，就是真正的"你"。

Admin_02: 但我还是害怕...
Director: 害怕是正常的。
Director: 但这也是必要的。
Director: 因为只有"新的人"，才能在这个静止的世界里生存。
Director: 因为只有"新的人"，才能...创造新的世界。

Admin_02: [连接丢失]`
  },
  {
    id: 'LOG-006',
    title: '档案：守望者计划',
    minXP: 3200,
    type: 'log',
    content: `档案级别：绝密
项目代号：Mnemosyne（记忆女神）

背景：
科学家们预测到了"信息热寂"的到来。随着短视频、碎片化信息和AI生成垃圾内容的泛滥，人类大脑处理深度逻辑的能力极速退化。
现实世界的解析度开始下降。

计划：
寻找具有高强度专注能力（High-Focus Capable）的个体。
将他们接入"方舟终端"。
利用他们的脑波作为核心处理器，反向渲染这个世界。

但这里有一个被隐藏的真相：
这个计划的目的，不仅仅是"拯救世界"。
它的真正目的，是"创造新的人类"。

通过深度专注，实验体的神经连接会被重组。
他们的思维方式会被优化。
他们的人格会被"升级"。

从某种意义上说，他们正在成为...新物种。
一个能够深度思考的物种。
一个能够理解复杂逻辑的物种。
一个...不再是"人类"的物种。

你是候选人之一吗？还是说...你是最后一个？

[档案末尾有一行被涂黑的文字]
"记住：当你专注到最后，你会成为一个新的人。
但那个'新的人'，可能不再记得'旧的人'是谁。
那个'新的人'，可能不再感受'旧的人'的感受。
那个'新的人'，可能不再...是'你'。

但这就是代价。
这就是'成为新的人'的代价。

你准备好了吗？"`
  }
];

// ==========================================
// 系统噪声生成器 (System Noise Generator)
// ==========================================
const SYSTEM_MESSAGES = [
  "正在从虚空中回收数据碎片... [进度 %d%]",
  "侦测到思维波动。频率稳定。正在为该区域上色...",
  "警告：检测到外部干扰（手机/娱乐）。请加强防火墙。",
  "系统日志：今日算力输出已上传至云端核心。",
  "收到一条来自过去的回音：'有人在吗？'",
  "背景渲染引擎：CPU 温度正常，逻辑电路畅通。",
  "提示：你的专注正在修补第 %s 区的逻辑漏洞。",
  "监测到微小的现实扭曲。这说明你正在变强。",
  "内存垃圾回收中... 删除了 300MB 的'焦虑'文件。",
  "底层协议：保持冷静，继续前行。",
  "正在编译新的物理法则...",
  "由于你的努力，世界的清晰度提升了 0.01%。"
];

export const getFragmentsForXP = (currentXP: number): Fragment[] => {
  const result: Fragment[] = [];
  const sortedCore = CORE_FRAGMENTS.sort((a, b) => a.minXP - b.minXP);
  
  const unlockedCore = sortedCore.filter(f => f.minXP <= currentXP);
  result.push(...unlockedCore);

  const STEP = 250; 
  const maxStep = Math.floor(currentXP / STEP) * STEP;

  for (let xp = STEP; xp <= maxStep; xp += STEP) {
    const hasCoreNearby = unlockedCore.some(f => Math.abs(f.minXP - xp) < 100);
    
    if (!hasCoreNearby) {
      const seed = xp;
      const msgIndex = seed % SYSTEM_MESSAGES.length;
      let content = SYSTEM_MESSAGES[msgIndex];
      
      content = content.replace('%d', (seed % 100).toString());
      content = content.replace('%s', (Math.floor(seed / 1000)).toString());

      result.push({
        id: `SYS-${xp}`,
        title: '系统底层监控',
        minXP: xp,
        type: 'system_noise',
        content: `> ${content}`,
        isProcedural: true
      });
    }
  }

  return result.sort((a, b) => a.minXP - b.minXP);
};

export const STORY_FRAGMENTS = CORE_FRAGMENTS;
